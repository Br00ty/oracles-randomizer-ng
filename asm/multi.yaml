common:
  00/multiPlayerNumber: db 00

seasons:
  # if the item buffer is nonzero, spawn the item at link and reset the buffer.
  # var 47 is used to signal the destination player number.
  05/checkNetItemBuffer: |
      push bc
      push de
      push hl
      ld hl,wNetTreasureIn
      ldi a,(hl)
      and a
      jr z,.done
      ld b,a
      ld c,(hl)
      ld e,BANK_TREASURE_DATA
      ld hl,reverseTreasureLookup
      call interBankCall
      call createTreasure
      jr nz,.done
      ld de,w1Link.yh
      call objectCopyPosition_rawAddress
      ld a,(multiPlayerNumber)
      ld l,47
      ld (hl),a
      ld hl,wNetCountIn
      inc (hl)
      ld hl,wNetCollect
      ld (hl),02
      ld hl,wNetTreasureIn
      xor a
      ldi (hl),a
      ld (hl),a
      .done
      pop hl
      pop de
      pop bc
      call 4226
      ret
  05/5495/: call checkNetItemBuffer

  # returns b = id, c = subid for b = id, c = param.
  # might loop forever if given bad data.
  15/reverseTreasureLookup: |
      ld hl,treasureObjectData
      ld a,b
      rst 18
      rst 18
      .idLoop
      bit 7,(hl)
      jr z,.idDone
      inc hl
      ldi a,(hl)
      ld h,(hl)
      ld l,a
      jr .idLoop
      .idDone
      ld a,c
      ld c,00
      inc hl
      .paramLoop
      cp (hl)
      jr z,.paramDone
      inc hl
      inc hl
      inc hl
      inc hl
      inc c
      jr .paramLoop
      .paramDone
      ret
